import{m as V,d as D,h as g,c as f,w as N,a as y,e as c,b as o,g as S,t as w,n as U,p as F,v as E,F as M,r as H,q as Z,s as q,o as P,k as b,x,u,j as k,l as C}from"./index-BTVEsdd2.js";import{_ as G}from"./BaseButton.vue_vue_type_script_setup_true_lang-BheV5iJ5.js";import{_ as J}from"./ManageableItems.vue_vue_type_script_setup_true_lang-B93NhIvD.js";import{u as K,_ as $}from"./categoryStore-CuUzrNnL.js";import{t as B}from"./transactionStore-CKwxT-Vb.js";import"./index-CbWGplPa.js";import"./EmptyState.vue_vue_type_script_setup_true_lang-Do_NLNOo.js";import"./format-BOdMUDrb.js";/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=V("arrow-down-a-z",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=V("arrow-up-a-z",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=V("arrow-up-z-a",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M15 4h5l-5 6h5",key:"8asdl1"}],["path",{d:"M15 20v-3.5a2.5 2.5 0 0 1 5 0V20",key:"r6l5cz"}],["path",{d:"M20 18h-5",key:"18j1r2"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=V("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),Y={class:"relative w-full"},ee={class:"truncate"},te={key:0,class:"p-2"},ae=["onClick"],le=["checked","onChange"],oe={key:1},re=D({__name:"DropdownList",props:{options:{},modelValue:{},mode:{},placeholder:{},direction:{}},emits:["update:modelValue"],setup(A,{emit:d}){const a=A,r=d,p=g(!1),m=g(""),s=f(()=>a.mode??"standard"),_=f(()=>a.direction==="up"?"bottom-full mb-1":"top-full mt-1");function v(){p.value=!p.value}function e(){p.value=!1}const l=f(()=>s.value==="searchable"&&m.value?a.options.filter(t=>t.label.toLowerCase().includes(m.value.toLowerCase())):a.options);function h(t){s.value!=="multiple"&&(r("update:modelValue",t.value),e())}function L(t){if(s.value!=="multiple")return;const i=Array.isArray(a.modelValue)?a.modelValue:[];i.includes(t.value)?r("update:modelValue",i.filter(n=>n!==t.value)):r("update:modelValue",[...i,t.value])}function z(t){return s.value==="multiple"?Array.isArray(a.modelValue)&&a.modelValue.includes(t.value):a.modelValue===t.value}const T=f(()=>{if(s.value==="multiple"){const t=Array.isArray(a.modelValue)?a.modelValue:[];return t.length===0?a.placeholder??"Select...":a.options.filter(n=>t.includes(n.value)).map(n=>n.label).join(", ")}else{const t=a.options.find(i=>i.value===a.modelValue);return t?t.label:a.placeholder??"Select..."}});function I(t){t.target.closest(".relative")||e()}return N(p,t=>{t?document.addEventListener("click",I):document.removeEventListener("click",I)}),(t,i)=>(c(),y("div",Y,[o("button",{onClick:v,class:"w-full flex justify-between items-center border border-gray-200 rounded px-3 py-2 bg-white text-left"},[o("span",ee,w(T.value),1),i[1]||(i[1]=o("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 9l-7 7-7-7"})],-1))]),p.value?(c(),y("div",{key:0,class:U(["absolute w-full border border-gray-200 rounded bg-white shadow-lg z-100 max-h-60 overflow-auto",_.value])},[s.value==="searchable"?(c(),y("div",te,[F(o("input",{"onUpdate:modelValue":i[0]||(i[0]=n=>m.value=n),type:"text",placeholder:"Search...",class:"w-full border border-gray-200 rounded px-2 py-1 text-sm"},null,512),[[E,m.value]])])):S("",!0),o("ul",null,[(c(!0),y(M,null,H(l.value,(n,j)=>(c(),y("li",{key:j,class:"px-3 py-2 cursor-pointer hover:bg-gray-100 flex items-center gap-2",onClick:O=>h(n)},[s.value==="multiple"?(c(),y(M,{key:0},[o("input",{type:"checkbox",class:"form-checkbox",checked:z(n),onChange:Z(O=>L(n),["stop"])},null,40,le),o("span",null,w(n.label),1)],64)):(c(),y("span",oe,w(n.label),1))],8,ae))),128))])],2)):S("",!0)]))}}),se={class:"flex flex-col space-y-4"},ne={class:"bg-gray-50 rounded-md border border-gray-200 p-4"},de={class:"flex items-center text-gray-600 mb-2 space-x-1"},ue={class:"bg-gray-50 rounded border border-gray-200 p-4"},ie={class:"flex items-center text-gray-600 mb-2 space-x-1"},ce={class:"flex flex-row items-center text-gray-600 mb-2 space-x-1"},me={class:"text-xs"},ke=D({__name:"CategoryPage",setup(A){const d=K(),a=[...B],r=g("Outcome"),p=[{label:"Name",value:"Name"},{label:"Date",value:"Date"}],m=g(p[0].label),s=g("ASC"),_=f(()=>{const v=d.categories.filter(l=>l.meta?.categoryType===r.value),e=s.value==="ASC"?1:-1;return v.sort((l,h)=>m.value==="Name"?l.name.localeCompare(h.name,"en",{sensitivity:"base"})*e:m.value==="Date"?l.createdAt.toISOString().localeCompare(h.createdAt.toISOString())*e:0)});return q(()=>{d.categories.map(v=>(v.subName=`${v.items?.length??0} Items`,v))}),P(()=>{d.fetchAll()}),(v,e)=>(c(),b(J,{addSubItemAble:!0,data:_.value,fetchAll:u(d).fetchAll,getById:u(d).getById,add:u(d).add,update:u(d).update,updateItem:u(d).updateItem,remove:u(d).remove,removeItem:u(d).removeItem},{form:x(()=>[k(G,{label:"Category Type",name:"meta.categoryType",modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=l=>r.value=l)},{customInputTitle:x(()=>[...e[5]||(e[5]=[o("h4",{class:"font-medium mb-3 text-slate-500 text-md"},"Select category type",-1)])]),customInput:x(()=>[k($,{initialIndex:a.findIndex(l=>l===r.value),modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=l=>r.value=l),class:"rounded border bg-white border border-gray-200 text-gray-500",data:a},null,8,["initialIndex","modelValue"])]),_:1},8,["modelValue"])]),filterBottomSheet:x(()=>[o("div",se,[o("div",ne,[o("div",de,[(c(),b(C(u(X)),{class:"stroke-gray-400 size-4"})),e[6]||(e[6]=o("span",{class:"text-sm"},"Category Type :",-1))]),k($,{initialIndex:a.findIndex(l=>l===r.value),modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=l=>r.value=l),class:"rounded border bg-white border border-gray-200 text-gray-500",data:[...u(B)]},null,8,["initialIndex","modelValue","data"])]),o("div",ue,[o("div",ie,[(c(),b(C(u(W)),{class:"stroke-gray-400 size-4"})),e[7]||(e[7]=o("span",{class:"text-sm"},"Sort By:",-1))]),o("div",ce,[k(re,{modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=l=>m.value=l),options:p,mode:"standard",direction:"up"},null,8,["modelValue"]),o("div",{class:"flex flex-row space-x-1 p-3 rounded border border-gray-200 bg-white",onClick:e[4]||(e[4]=l=>s.value=s.value==="ASC"?"DSC":"ASC")},[(c(),b(C(s.value==="ASC"?u(Q):u(R)),{class:"stroke-gray-400 size-4"})),o("span",me,w(s.value),1)])])])])]),_:1},8,["data","fetchAll","getById","add","update","updateItem","remove","removeItem"]))}});export{ke as default};
