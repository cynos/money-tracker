import{C as q,u as G}from"./transactionStore-CKwxT-Vb.js";import{m as Q,d as B,h as k,c as $,w as E,a as f,b as t,k as h,l as S,u as v,t as c,e as o,F as C,r as L,q as O,n as T,B as M,a0 as W,o as X,j,T as Y,x as A,Q as H,f as z}from"./index-BTVEsdd2.js";import{l as y,s as F}from"./localDataStore-BGLHiYx-.js";import{u as J}from"./assetStore-D16u2jrt.js";import{C as K,f as I,a as Z}from"./format-BOdMUDrb.js";import{b as ee,c as te}from"./index-CbWGplPa.js";import{_ as U,C as se,a as ae}from"./EmptyState.vue_vue_type_script_setup_true_lang-Do_NLNOo.js";import{f as oe}from"./array-pxlSuadx.js";/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=Q("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),le={class:"flex items-center justify-between px-4 py-2 relative"},ie={class:"text-2xl text-gray-600 hover:text-black"},re={class:"mx-auto text-center font-medium pointer-events-none"},ce={class:"text-2xl text-gray-600 hover:text-black"},ue=B({__name:"DateNavigator",props:{initialDate:{}},emits:["update:date"],setup(d,{emit:p}){const a=k(d.initialDate||new Date),x=$(()=>{const n=a.value,l=n.getDate(),_=n.getMonth()+1,b=n.getFullYear();return`${l}/${_}/${b}`}),r=()=>{a.value=new Date(a.value),a.value.setDate(a.value.getDate()-1)},m=()=>{a.value=new Date(a.value),a.value.setDate(a.value.getDate()+1)},u=p;return E(a,n=>{u("update:date",n)}),(n,l)=>(o(),f("div",le,[t("div",{class:"absolute left-0 top-0 h-full w-1/3 flex items-center justify-start px-4 cursor-pointer",onClick:r},[t("span",ie,[(o(),h(S(v(K))))])]),t("div",re,c(x.value),1),t("div",{class:"absolute right-0 top-0 h-full w-1/3 flex items-center justify-end px-4 cursor-pointer",onClick:m},[t("span",ce,[(o(),h(S(v(q))))])])]))}}),de={class:"flex justify-between text-center w-full gap-4"},me={class:"flex-1"},fe={class:"text-sm text-gray-600"},ve={class:"text-blue-500 font-semibold text-lg"},pe={class:"flex-1"},xe={class:"text-sm text-gray-600"},he={class:"text-red-500 font-semibold text-lg"},ge=B({__name:"SummarizerBoard",props:{income:{},incomeTitle:{},outcome:{},outcomeTitle:{}},setup(d){return(p,g)=>(o(),f("div",de,[t("div",me,[t("div",fe,c(d.incomeTitle??"income"),1),t("div",ve,c(v(I)(d.income)),1)]),t("div",pe,[t("div",xe,c(d.outcomeTitle??"outcome"),1),t("div",he,c(v(I)(d.outcome)),1)])]))}}),_e={class:"divide-y divide-gray-100"},ye=["onClick"],be=["onClick"],De={class:"text-sm text-gray-700 truncate"},we=B({__name:"ListTableWithSwipe",props:{columns:{},items:{}},emits:["selected","delete"],setup(d,{emit:p}){const g=p,a=k(null);function x(r,m){if(!r)return;const{coordsStart:u,coordsEnd:n,isSwiping:l}=te(r,{threshold:30});E(l,_=>{if(!_){const b=n.x-u.x;b<-50?a.value=m:b>50&&a.value===m&&(a.value=null)}})}return ee(document,"click",r=>{r.target.closest(".relative.overflow-hidden")||(a.value=null)}),(r,m)=>(o(),f("div",_e,[(o(!0),f(C,null,L(d.items,(u,n)=>(o(),f("div",{key:n,class:"relative overflow-hidden",ref_for:!0,ref:l=>x(l,n)},[t("div",{class:T(["absolute inset-y-0 right-0 flex items-center bg-red-500 text-white px-4 transition-transform duration-300",{"translate-x-0":a.value===n,"translate-x-full":a.value!==n}])},[t("button",{onClick:O(l=>g("delete",u),["stop"])},"Delete",8,ye)],2),t("div",{class:T(["flex flex-row py-1 bg-white transition-transform duration-300",{"-translate-x-20":a.value===n}]),onClick:O(l=>g("selected",u),["stop"])},[M(r.$slots,"row",{item:u},()=>[(o(!0),f(C,null,L(d.columns,(l,_)=>(o(),f("div",{key:_,class:T(["px-2",[l.align==="right"?"text-right":"text-left",l.class??"",l.width?`w-${l.width}`:"flex-1"]])},[M(r.$slots,l.key,{item:u},()=>[t("div",De,c(u[l.key]),1)])],2))),128))])],10,be)]))),128))]))}}),ke={class:"bg-slate-50 border-slate-200 border me-3 rounded-md p-2 shrink-0"},$e={class:"flex items-center justify-center w-5 h-5"},Te={class:"bg-gray-100 rounded-sm"},Se={key:2,class:"flex flex-1 items-center"},Ce={class:"flex flex-col gap-0.5"},Ie={class:"text-sm font-medium text-black"},Be={class:"text-xs text-gray-400"},Ne={class:"font-bold"},je={class:"text-xs text-gray-400"},Ve=B({__name:"DailyTab",setup(d){const p=G(),g=J(),a=H(),x=k([]),r=k(0),m=k(0),u=$(()=>y.value.selectedDate?new Date(y.value.selectedDate):new Date),n=$(()=>{const i=[...p.transactions].sort((e,s)=>e.time.getTime()-s.time.getTime());return oe(g.assets).map(e=>{const s=i.find(D=>D.asset.id===e.id),R=i.reduce((D,w)=>{if(w.asset.id===e.id){if(w.type==="Outcome")return D+parseInt(w.total);if(w.type==="Income")return D-parseInt(w.total)}return D},0);return e.meta&&(e.meta.lastUsed=s?.time.toISOString(),e.meta.restBalance=(e.meta.balance||0)-R),e}).sort((e,s)=>(s.meta?.restBalance||0)-(e.meta?.restBalance||0)).filter(e=>e.meta?.restBalance!==0)}),l=i=>{F({...y.value,selectedTransactionItem:i}),a.push("transaction?action=edit")},_=i=>{i.id&&p.remove(i.id),x.value=x.value.filter(e=>e.id!=i.id)},b=[{key:"content"},{key:"amount",width:"30%",align:"right"}],N=$(()=>{const i=new Date(y.value.selectedDate||"");return isNaN(i.getTime())?[]:x.value.filter(e=>e.time.toDateString()===i.toDateString())});function V(){a.push({path:"transaction"})}function P(i){y.value.selectedDate=i.toISOString()}return E(N,i=>{r.value=0,m.value=0,i.forEach(e=>{e.type=="Income"?r.value+=parseInt(e.total):e.type=="Outcome"&&(m.value+=parseInt(e.total))})}),W(()=>{delete y.value.selectedTransactionItem,F(y.value)}),X(async()=>{await g.fetchAll(),x.value=await p.fetchAll()}),(i,e)=>(o(),f(C,null,[(o(),h(Y,{to:"#action-left-teleport"},[t("button",{onClick:e[0]||(e[0]=()=>console.log("search")),class:"p-2 rounded-md text-gray-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"},[(o(),h(S(v(ne))))])])),e[4]||(e[4]=t("h2",{class:"text-lg font-bold text-gray-500"},"Assets",-1)),n.value.length?(o(!0),f(C,{key:1},L(n.value.slice(0,3),s=>(o(),h(ae,{key:s?.id,id:s?.id||"",name:s?.name||"",subName:v(I)(s.meta?.restBalance??0)},{icon:A(()=>[t("div",ke,[t("div",$e,c(s?.icon),1)])]),_:2},1032,["id","name","subName"]))),128)):(o(),h(U,{key:0,message:"Asset Not Available",class:"p-5"})),t("div",Te,[j(ue,{"initial-date":u.value,"onUpdate:date":P},null,8,["initial-date"])]),j(ge,{class:"rounded-md py-3",income:r.value,"income-title":"Total Incomes",outcome:m.value,"outcome-title":"Total Expenses"},null,8,["income","outcome"]),N.value.length?(o(),h(we,{key:3,columns:b,items:N.value,onDelete:e[1]||(e[1]=s=>_(s)),onSelected:e[2]||(e[2]=s=>l(s))},{content:A(({item:s})=>[t("div",Ce,[t("div",Ie,c(s.notes),1),t("div",Be,[z(c(v(Z)(s.time))+" . ",1),t("span",Ne,c(s.category.name),1)])])]),amount:A(({item:s})=>[t("div",{class:T(["text-sm font-semibold",[s.type=="Outcome"?"text-red-500":"text-blue-500"]])},[z(c(v(I)(s.total))+" ",1),e[3]||(e[3]=t("br",null,null,-1)),t("span",je,c(s.asset.name),1)],2)]),_:1},8,["items"])):(o(),f("div",Se,[j(U,{message:"Transaction Not Available"})])),(o(),h(S(v(se)),{onClick:V,class:"text-white size-14 fill-orange-500 absolute right-[1rem] bottom-[5rem]"}))],64))}});export{Ve as default};
