import{C as q,u as G}from"./transactionStore-C-kjVIk3.js";import{m as Q,d as I,h as w,c as k,w as E,a as f,b as t,k as h,l as T,u as v,t as c,e as o,F as C,r as L,q as M,n as $,B as O,a0 as U,o as W,j,T as X,x as A,Q as Y,f as z}from"./index-CL5__TWX.js";import{l as y,s as F}from"./localDataStore-K-e5_swk.js";import{u as H}from"./assetStore-qoeZQdVh.js";import{C as J,f as S,a as K}from"./format-CGxH6fZv.js";import{b as Z,c as ee}from"./index-XR5uOQR1.js";import{_ as V,C as te,a as se}from"./EmptyState.vue_vue_type_script_setup_true_lang-kU1beilK.js";import{f as ae}from"./array-pxlSuadx.js";/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=Q("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),ne={class:"flex items-center justify-between px-4 py-2 relative"},le={class:"text-2xl text-gray-600 hover:text-black"},ie={class:"mx-auto text-center font-medium pointer-events-none"},re={class:"text-2xl text-gray-600 hover:text-black"},ce=I({__name:"DateNavigator",props:{initialDate:{}},emits:["update:date"],setup(d,{emit:p}){const a=w(d.initialDate||new Date),x=k(()=>{const n=a.value,l=n.getDate(),g=n.getMonth()+1,b=n.getFullYear();return`${l}/${g}/${b}`}),r=()=>{a.value=new Date(a.value),a.value.setDate(a.value.getDate()-1)},m=()=>{a.value=new Date(a.value),a.value.setDate(a.value.getDate()+1)},u=p;return E(a,n=>{u("update:date",n)}),(n,l)=>(o(),f("div",ne,[t("div",{class:"absolute left-0 top-0 h-full w-1/3 flex items-center justify-start px-4 cursor-pointer",onClick:r},[t("span",le,[(o(),h(T(v(J))))])]),t("div",ie,c(x.value),1),t("div",{class:"absolute right-0 top-0 h-full w-1/3 flex items-center justify-end px-4 cursor-pointer",onClick:m},[t("span",re,[(o(),h(T(v(q))))])])]))}}),ue={class:"flex justify-between text-center w-full gap-4"},de={class:"flex-1"},me={class:"text-sm text-gray-600"},fe={class:"text-blue-500 font-semibold text-lg"},ve={class:"flex-1"},pe={class:"text-sm text-gray-600"},xe={class:"text-red-500 font-semibold text-lg"},he=I({__name:"SummarizerBoard",props:{income:{},incomeTitle:{},outcome:{},outcomeTitle:{}},setup(d){return(p,_)=>(o(),f("div",ue,[t("div",de,[t("div",me,c(d.incomeTitle??"income"),1),t("div",fe,c(v(S)(d.income)),1)]),t("div",ve,[t("div",pe,c(d.outcomeTitle??"outcome"),1),t("div",xe,c(v(S)(d.outcome)),1)])]))}}),_e={class:"divide-y divide-gray-100"},ge=["onClick"],ye=["onClick"],be={class:"text-sm text-gray-700 truncate"},De=I({__name:"ListTableWithSwipe",props:{columns:{},items:{}},emits:["selected","delete"],setup(d,{emit:p}){const _=p,a=w(null);function x(r,m){if(!r)return;const{coordsStart:u,coordsEnd:n,isSwiping:l}=ee(r,{threshold:30});E(l,g=>{if(!g){const b=n.x-u.x;b<-50?a.value=m:b>50&&a.value===m&&(a.value=null)}})}return Z(document,"click",r=>{r.target.closest(".relative.overflow-hidden")||(a.value=null)}),(r,m)=>(o(),f("div",_e,[(o(!0),f(C,null,L(d.items,(u,n)=>(o(),f("div",{key:n,class:"relative overflow-hidden",ref_for:!0,ref:l=>x(l,n)},[t("div",{class:$(["absolute inset-y-0 right-0 flex items-center bg-red-500 text-white px-4 transition-transform duration-300",{"translate-x-0":a.value===n,"translate-x-full":a.value!==n}])},[t("button",{onClick:M(l=>_("delete",u),["stop"])},"Delete",8,ge)],2),t("div",{class:$(["flex flex-row py-1 bg-white transition-transform duration-300",{"-translate-x-20":a.value===n}]),onClick:M(l=>_("selected",u),["stop"])},[O(r.$slots,"row",{item:u},()=>[(o(!0),f(C,null,L(d.columns,(l,g)=>(o(),f("div",{key:g,class:$(["px-2",[l.align==="right"?"text-right":"text-left",l.class??"",l.width?`w-${l.width}`:"flex-1"]])},[O(r.$slots,l.key,{item:u},()=>[t("div",be,c(u[l.key]),1)])],2))),128))])],10,ye)]))),128))]))}}),we={class:"bg-slate-50 border-slate-200 border me-3 rounded-md p-2 shrink-0"},ke={class:"flex items-center justify-center w-5 h-5"},$e={class:"bg-gray-100 rounded-sm"},Te={key:2,class:"flex flex-1 items-center"},Ce={class:"flex flex-col gap-0.5"},Se={class:"text-sm font-medium text-black"},Ie={class:"text-xs text-gray-400"},Be={class:"font-bold"},Ne={class:"text-xs text-gray-400"},Ve=I({__name:"DailyTab",setup(d){const p=G(),_=H(),a=Y(),x=w([]),r=w(0),m=w(0),u=k(()=>y.value.selectedDate?new Date(y.value.selectedDate):new Date),n=k(()=>{const i=[...p.transactions].sort((e,s)=>e.time.getTime()-s.time.getTime());return ae(_.assets).map(e=>{const s=i.reduce((N,D)=>{if(D.asset.id===e.id){if(D.type==="Outcome")return N+parseInt(D.total);if(D.type==="Income")return N-parseInt(D.total)}return N},0);return e.meta&&(e.meta.restBalance=(e.meta.balance||0)-s),e}).sort((e,s)=>(s.meta?.restBalance||0)-(e.meta?.restBalance||0)).filter(e=>e.meta?.restBalance!==0)}),l=i=>{F({...y.value,selectedTransactionItem:i}),a.push("transaction?action=edit")},g=i=>{i.id&&p.remove(i.id),x.value=x.value.filter(e=>e.id!=i.id)},b=[{key:"content"},{key:"amount",width:"30%",align:"right"}],B=k(()=>{const i=new Date(y.value.selectedDate||"");return isNaN(i.getTime())?[]:x.value.filter(e=>e.time.toDateString()===i.toDateString())});function P(){a.push({path:"transaction"})}function R(i){y.value.selectedDate=i.toISOString()}return E(B,i=>{r.value=0,m.value=0,i.forEach(e=>{e.type=="Income"?r.value+=parseInt(e.total):e.type=="Outcome"&&(m.value+=parseInt(e.total))})}),U(()=>{delete y.value.selectedTransactionItem,F(y.value)}),W(async()=>{await _.fetchAll(),x.value=await p.fetchAll()}),(i,e)=>(o(),f(C,null,[(o(),h(X,{to:"#action-left-teleport"},[t("button",{onClick:e[0]||(e[0]=()=>console.log("search")),class:"p-2 rounded-md text-gray-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"},[(o(),h(T(v(oe))))])])),e[4]||(e[4]=t("h2",{class:"text-lg font-bold text-gray-500"},"Assets",-1)),n.value.length?(o(!0),f(C,{key:1},L(n.value.slice(0,3),s=>(o(),h(se,{key:s?.id,id:s?.id||"",name:s?.name||"",subName:v(S)(s.meta?.restBalance??0)},{icon:A(()=>[t("div",we,[t("div",ke,c(s?.icon),1)])]),_:2},1032,["id","name","subName"]))),128)):(o(),h(V,{key:0,message:"Asset Not Available",class:"p-5"})),t("div",$e,[j(ce,{"initial-date":u.value,"onUpdate:date":R},null,8,["initial-date"])]),j(he,{class:"rounded-md py-3",income:r.value,"income-title":"Total Incomes",outcome:m.value,"outcome-title":"Total Expenses"},null,8,["income","outcome"]),B.value.length?(o(),h(De,{key:3,columns:b,items:B.value,onDelete:e[1]||(e[1]=s=>g(s)),onSelected:e[2]||(e[2]=s=>l(s))},{content:A(({item:s})=>[t("div",Ce,[t("div",Se,c(s.notes),1),t("div",Ie,[z(c(v(K)(s.time))+" . ",1),t("span",Be,c(s.category.name),1)])])]),amount:A(({item:s})=>[t("div",{class:$(["text-sm font-semibold",[s.type=="Outcome"?"text-red-500":"text-blue-500"]])},[z(c(v(S)(s.total))+" ",1),e[3]||(e[3]=t("br",null,null,-1)),t("span",Ne,c(s.asset.name),1)],2)]),_:1},8,["items"])):(o(),f("div",Te,[j(V,{message:"Transaction Not Available"})])),(o(),h(T(v(te)),{onClick:P,class:"text-white size-14 fill-orange-500 absolute right-[1rem] bottom-[5rem]"}))],64))}});export{Ve as default};
